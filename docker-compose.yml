version: '3.5'
services:

  helge-api:
    image: hnclonecphb/http-api
    environment:
      - CLOUDAMQP_URL=amqp://guest:guest@rabbitmq:5672/rabbitmq_vhost
    ports:
      - 5001:5001
    links:
      - backend-app
      - database  
      - rabbitmq

  frontend-app:
    image: hnclonecphb/frontend
    ports:
      - 3000:3000
    links:
      - database
      - backend-app
  
  backend-app:
    image: hnclonecphb/backend
    ports:
      - 5000:5000
    links:
      - database 

  database:
    image: hnclonecphb/database

  rabbitmq:
    image: rabbitmq
    environment:
      - RABBITMQ_DEFAULT_VHOST=rabbitmq_vhost
    ports:
      - 5672:5672
